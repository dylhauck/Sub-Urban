<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Product — SUB•URBAN</title>
  <link rel="stylesheet" href="style.css"/>
  <link rel="icon" href="favicon.ico"/>
  <style>
    body, input, textarea, button, label, h1, h2, h3, p, a { font-family: Arial, sans-serif !important; }
    .pdp-main{ transition: opacity .18s ease; }
  </style>
</head>
<body>
  <div class="bar">Product</div>

  <!-- Header -->
  <header class="header center-nav">
    <nav class="nav" aria-label="Primary">
      <a href="index.html#new">New</a>
      <a href="index.html#tops">Tops</a>
      <a href="index.html#dresses">Dresses</a>
      <a href="index.html#about">About</a>
      <div class="menu account-menu">
        <button class="menu-trigger" id="acctMenuBtn" aria-haspopup="true" aria-expanded="false">My Account ▾</button>
        <div class="menu-list" id="acctMenu" role="menu" aria-label="My Account">
          <a role="menuitem" data-acct="account"  href="account.html">My Account</a>
          <a role="menuitem" data-acct="orders"   href="orders.html">My Orders</a>
          <a role="menuitem" data-acct="wishlist" href="wishlist.html">Wishlist</a>
          <a role="menuitem" id="authAction" class="menu-link-btn" href="login.html">Log in</a>
        </div>
      </div>
    </nav>
    <button class="icon-btn" id="menuBtn" aria-label="Open menu" aria-expanded="false">☰</button>
  </header>

  <!-- Drawer -->
  <div class="drawer" id="drawer" aria-hidden="true">
    <a href="index.html#new">New</a><a href="index.html#tops">Tops</a><a href="index.html#dresses">Dresses</a><a href="index.html#about">About</a>
    <a data-acct="account" href="account.html">My Account</a><a data-acct="orders" href="orders.html">My Orders</a><a data-acct="wishlist" href="wishlist.html">Wishlist</a>
    <a id="authActionMobile" href="login.html">Log in</a>
  </div>

  <!-- Breadcrumbs -->
  <nav class="crumbs"><a href="index.html">Home</a> / <a href="index.html#collection">Collection</a> / <span id="crumbName">Aurora Satin Set</span></nav>

  <!-- PDP -->
  <main class="pdp" aria-live="polite">
    <section class="pdp-gallery">
      <img id="pdpMain" class="pdp-main" src="https://images.unsplash.com/photo-1551488831-00ddcb6c6bd3?q=80&w=1600&auto=format&fit=crop" alt="Aurora Satin Set in Rose-Gold"/>
      <div id="pdpThumbs" class="pdp-thumbs"></div>
    </section>

    <section class="pdp-info">
      <h1 id="pdpTitle" class="pdp-title">Aurora Satin Set</h1>
      <div class="pdp-meta"><div class="stars" aria-label="4.7 stars">★★★★★</div><div class="sku" id="pdpSku">SUB-AUR-001</div></div>
      <div class="pdp-price" id="pdpPrice">$129</div>

      <label class="opt-label">Color</label>
      <div id="pdpSwatches" class="swatches" role="radiogroup" aria-label="Choose color"></div>

      <label class="opt-label">Size</label>
      <div id="pdpSizes" class="sizes" role="radiogroup" aria-label="Choose size"></div>

      <div class="pdp-actions">
        <button id="addToBag" class="btn primary" type="button">Add to bag</button>
        <button id="addToWishlist" class="btn ghost" type="button">♡ Wishlist</button>
      </div>
      <p class="pdp-note" id="pdpNote">Free shipping over $75. Free 30-day returns.</p>

      <div class="pdp-desc">
        <h2>Details</h2>
        <ul id="pdpBullets">
          <li>Satin two-piece with silver piping</li>
          <li>Hidden side zip, adjustable straps</li>
          <li>True to size</li>
        </ul>
      </div>
    </section>
  </main>

  <!-- Related -->
  <section class="related">
    <h2 style="font-family: Arial, sans-serif;">You might also like</h2>
    <div class="grid">
      <article class="card">
        <a href="product.html" aria-label="Neon Violet Slip">
          <img src="https://images.unsplash.com/photo-1549216962-9f7b6ac7f8a9?q=80&w=1200&auto=format&fit=crop" alt="Neon Violet Slip"/>
        </a>
        <div class="card-body">
          <h3>Neon Violet Slip</h3>
          <p class="price">$98</p>
          <div class="card-actions">
            <a class="btn outline" href="product.html">View details</a>
            <button class="btn ghost" type="button" onclick="toast('Added to wishlist')">♡ Wishlist</button>
          </div>
        </div>
      </article>
      <article class="card">
        <a href="product.html" aria-label="Holographic Midi Skirt">
          <img src="https://images.unsplash.com/photo-1556905055-8f358a7a47b2?q=80&w=1200&auto=format&fit=crop" alt="Holographic Midi Skirt"/>
        </a>
        <div class="card-body">
          <h3>Holographic Midi Skirt</h3>
          <p class="price">$79</p>
          <div class="card-actions">
            <a class="btn outline" href="product.html">View details</a>
            <button class="btn ghost" type="button" onclick="toast('Added to wishlist')">♡ Wishlist</button>
          </div>
        </div>
      </article>
      <article class="card">
        <a href="product.html" aria-label="Teal Ribbed Top">
          <img src="https://images.unsplash.com/photo-1515378791036-0648a3ef77b2?q=80&w=1200&auto=format&fit=crop" alt="Teal Ribbed Top"/>
        </a>
        <div class="card-body">
          <h3>Teal Ribbed Top</h3>
          <p class="price">$54</p>
          <div class="card-actions">
            <a class="btn outline" href="product.html">View details</a>
            <button class="btn ghost" type="button" onclick="toast('Added to wishlist')">♡ Wishlist</button>
          </div>
        </div>
      </article>
    </div>
  </section>

  <!-- Footer -->
  <footer class="footer">
    <div class="footer-brand"><span>SUB</span><span class="dot">•</span><span class="urban">URBAN</span></div>
    <nav class="footer-nav" aria-label="Footer">
      <a href="index.html#new">New Arrivals</a><a href="#">Shipping &amp; Returns</a><a href="#">Size Guide</a><a href="contact.html">Contact Us</a>
    </nav>
    <div class="footer-meta">© 2025 SUB•URBAN</div>
  </footer>

  <script type="module" src="auth.js"></script>
  <script src="script.js" defer></script>

  <!-- PDP logic -->
  <script>
    const PRODUCT = {
      id:"aurora-set", title:"Aurora Satin Set", price:129, sku:"SUB-AUR-001",
      sizes:["XS","S","M","L","XL"],
      colors:{
        "Rose-Gold":{ swatch:"#B76E79", images:[
          "https://images.unsplash.com/photo-1551488831-00ddcb6c6bd3?q=80&w=1600&auto=format&fit=crop",
          "https://images.unsplash.com/photo-1520976005265-3b5c3a621b83?q=80&w=1600&auto=format&fit=crop",
          "https://images.unsplash.com/photo-1543862470-d4c43e9d5b09?q=80&w=1600&auto=format&fit=crop"
        ]},
        "Teal":{ swatch:"#14B8A6", images:[
          "https://images.unsplash.com/photo-1512436991641-6745cdb1723f?q=80&w=1600&auto=format&fit=crop",
          "https://images.unsplash.com/photo-1516726817505-f5ed825624d8?q=80&w=1600&auto=format&fit=crop",
          "https://images.unsplash.com/photo-1519744352450-63228bd3b9fb?q=80&w=1600&auto=format&fit=crop"
        ]},
        "Violet":{ swatch:"#7C3AED", images:[
          "https://images.unsplash.com/photo-1549216962-9f7b6ac7f8a9?q=80&w=1600&auto=format&fit=crop",
          "https://images.unsplash.com/photo-1532444458054-3d8b1fefb5d8?q=80&w=1600&auto=format&fit=crop"
        ]},
        "Silver":{ swatch:"#C0C0C0", images:[
          "https://images.unsplash.com/photo-1556905055-8f358a7a47b2?q=80&w=1600&auto=format&fit=crop",
          "https://images.unsplash.com/photo-1490481651871-ab68de25d43d?q=80&w=1600&auto=format&fit=crop"
        ]}
      },
      bullets:["Satin two-piece with silver piping","Hidden side zip, adjustable straps","True to size"]
    };

    const $=(s,r=document)=>r.querySelector(s);
    function el(t,a={},c=[]){const n=document.createElement(t);for(const[k,v]of Object.entries(a)){if(k==='style'&&typeof v==='object')Object.assign(n.style,v);else if(k.startsWith('on')&&typeof v==='function')n.addEventListener(k.slice(2),v);else if(k==='dataset')Object.assign(n.dataset,v);else n.setAttribute(k,v);} (Array.isArray(c)?c:[c]).forEach(x=>{if(x==null)return;n.appendChild(typeof x==='string'?document.createTextNode(x):x)});return n;}
    function toast(msg){const t=el('div',{class:'toast'},msg);document.body.appendChild(t);requestAnimationFrame(()=>{t.style.opacity=1;t.style.transform='translateX(-50%)';});setTimeout(()=>{t.style.opacity=0;},1400);setTimeout(()=>{t.remove();},1800);}

    const titleEl=$("#pdpTitle"), priceEl=$("#pdpPrice"), skuEl=$("#pdpSku"), mainImg=$("#pdpMain"), thumbs=$("#pdpThumbs"),
          swatches=$("#pdpSwatches"), sizesEl=$("#pdpSizes"), bullets=$("#pdpBullets"), crumb=$("#crumbName");

    titleEl.textContent=PRODUCT.title; priceEl.textContent=`$${PRODUCT.price}`; skuEl.textContent=PRODUCT.sku; crumb.textContent=PRODUCT.title;
    bullets.innerHTML=""; PRODUCT.bullets.forEach(b=>bullets.appendChild(el("li",{},b)));

    const colorNames=Object.keys(PRODUCT.colors); let selectedColor=colorNames[0]; let selectedSize=PRODUCT.sizes[0];

    function renderSizes(){ sizesEl.innerHTML=""; PRODUCT.sizes.forEach(sz=>{const id=`size_${sz}`; const i=el("input",{type:"radio",name:"size",id,value:sz, ...(sz===selectedSize?{checked:""}:{})}); const l=el("label",{for:id},sz); sizesEl.appendChild(i); sizesEl.appendChild(l);}); }
    sizesEl.addEventListener("change",e=>{ if(e.target.name==="size") selectedSize=e.target.value; });

    function renderSwatches(){ swatches.innerHTML=""; colorNames.forEach(name=>{ const c=PRODUCT.colors[name]; const s=el("button",{class:"swatch",type:"button",title:name,"aria-label":name,style:{background:c.swatch,borderColor:"rgba(0,0,0,.12)"}}); if(name===selectedColor) s.style.outline="3px solid rgba(0,0,0,.15)";
      s.addEventListener("click",()=>{ selectedColor=name; renderSwatches(); renderImages(); }); swatches.appendChild(s); }); }

    function renderImages(){ const imgs=PRODUCT.colors[selectedColor].images; mainImg.style.opacity=.2; setTimeout(()=>{ mainImg.src=imgs[0]; mainImg.alt=`${PRODUCT.title} in ${selectedColor}`; },90); setTimeout(()=>{ mainImg.style.opacity=1; },140);
      thumbs.innerHTML=""; imgs.forEach((src,i)=>{ const btn=el("button",{class:"thumb",type:"button"}, el("img",{src,alt:`${PRODUCT.title} ${selectedColor} image ${i+1}`})); btn.addEventListener("click",()=>{ mainImg.style.opacity=.2; setTimeout(()=>{ mainImg.src=src; },90); setTimeout(()=>{ mainImg.style.opacity=1; },140);}); thumbs.appendChild(btn); }); }

    renderSizes(); renderSwatches(); renderImages();

    /* Wishlist (same key as index & wishlist.js) */
    const WL_KEY='wishlist_local'; let __memWL=[];
    function wlRead(){ try{ return JSON.parse(localStorage.getItem(WL_KEY)||'[]'); }catch(e){ return __memWL.slice(); } }
    function wlWrite(a){ try{ localStorage.setItem(WL_KEY, JSON.stringify(a)); }catch(e){ __memWL=a.slice(); } }

    $("#addToWishlist")?.addEventListener("click", ()=>{
      try{
        const arr=wlRead();
        if(!arr.find(x=>x.id===PRODUCT.id)){
          arr.push({ id:PRODUCT.id, title:PRODUCT.title, price:PRODUCT.price, image:$("#pdpMain").src, ts:Date.now() });
          wlWrite(arr);
        }
        toast("Added to wishlist");
      }catch(e){ toast("Could not add to wishlist"); }
    });

    $("#addToBag")?.addEventListener("click", ()=>{ toast(`Added ${selectedSize} • ${selectedColor} to bag`); });
  </script>
</body>
</html>
